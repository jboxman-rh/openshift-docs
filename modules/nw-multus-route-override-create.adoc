// Module included in the following assemblies:
//
// * networking/multiple_networks/configuring-route-override.adoc

[id=""]
= Configuring a route override

.Prerequisites

.Procedure


[id="nw-multus-route-override-example_{context}"]
== Specifying routes using the route-override CNI plugin

In addition to assigning IP addresses to pods, you can also override any routing on a given pod.

The "route-override" CNI plugin is used to accomplish this, and is used as a "chained plugin". To chain
CNI plugins, you specify a list of CNI configurations. Only some plugins (such as route-override) can
be utilized in this fashion, and are typically used to add capabilities or alter properties of additional
network interfaces.

.Route-Override CNI chained CNI plug-in JSON configuration object
[source,json]
----
{
    "cniVersion": "0.3.0",
    "name" : "exampleconfiguration",
    "plugins": [ <1>
    {
        "type": "...", <2>
        "ipam": {
            "type": "..."
        }
    },
    {
        "type" : "route-override", <3>
        "flushroutes" : true, <4>
        "addroutes": [ <5>
        {
            "dst": "192.168.10.0/24", <6>
            "gw": "10.1.254.254" <7>
        }],
        "delroutes": [ <8>
        {
            "dst": "192.168.0.0/24"
        }],
        "flushgateway": false, <9>
    }
    ]
}
----

<1> When using chained plugins the `plugins` key should be a list of JSON objects
<2> The first JSON object in the list will be the primary CNI plugin for the additional network.
<3> The second JSON object should be set to `"type" : "route-override"` in order to alter routing. Required.
<4> The `flushroutes` key, when set to true, will remove all existing routes from pods referencing this configuration. Optional.
<5> The `addroutes` key is a list of JSON objects describing route destinations and gateways to be added. Optional.
<6> The `dst` field in each `addroutes` object is the destination IP address and subnet mask in CIDR format.
<7> The `gw` field is the gateway to set for each of the destination CIDR ranges. Optional.
<8> The `delroutes` key is a list of JSON objects describing which destination routes to delete.
<9> The `flushgateway` key when set to true, will remove the default gateway. Optional.

